local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RequestCommand = ReplicatedStorage:WaitForChild("HDAdminHDClient").Signals.RequestCommandSilent

RequestCommand:InvokeServer(";btools me")
RequestCommand:InvokeServer(";fogcolor black")
wait(0.4)
RequestCommand:InvokeServer(";punish all")
wait(0.1)

local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local backpack = player.Backpack

-- ===== 获取 F3X =====
local function getf3x()
	for _, v in ipairs(backpack:GetChildren()) do
		if v:FindFirstChild("SyncAPI") then
			return v
		end
	end
	for _, v in ipairs(char:GetChildren()) do
		if v:FindFirstChild("SyncAPI") then
			return v
		end
	end
	return nil
end

local f3x = getf3x()
if not f3x then
	warn("you dont have f3x skid")
	return
end

local syncapi = f3x.SyncAPI
local serverendpoint = syncapi.ServerEndpoint

-- ===== 删除世界 =====
local function delete(part)
	serverendpoint:InvokeServer("Remove", { part })
end

local function deleteall()
	for _, v in ipairs(workspace:GetDescendants()) do
		if v:IsA("BasePart") or v:IsA("UnionOperation") then
			task.spawn(function()
				delete(v)
			end)
		end
	end
end

deleteall()
RequestCommand:InvokeServer(";fogcolor black ;time")

-- ===== F3X 基础函数 =====
local function resize(part, size, cf)
	serverendpoint:InvokeServer("SyncResize", {{
		Part = part,
		CFrame = cf,
		Size = size
	}})
end

local function syncmaterial(part, mate)
	serverendpoint:InvokeServer("SyncMaterial", {{
		Part = part,
		Material = mate
	}})
end

local function transparency(part, trans)
	serverendpoint:InvokeServer("SyncMaterial", {{
		Part = part,
		Transparency = trans
	}})
end

local function color(part, col)
	serverendpoint:InvokeServer("SyncColor", {{
		Part = part,
		Color = col,
		UnionColoring = false
	}})
end

local function syncmeshid(part, id)
	serverendpoint:InvokeServer("SyncMesh", {{
		Part = part,
		MeshId = "rbxassetid://" .. id
	}})
end

local function makemesh(part)
	serverendpoint:InvokeServer("CreateMeshes", {{
		Part = part
	}})
end

local function syncmeshsize(part, vec)
	serverendpoint:InvokeServer("SyncMesh", {{
		Part = part,
		Scale = vec
	}})
end

local function syncmeshtexture(part, id)
	serverendpoint:InvokeServer("SyncMesh", {{
		Part = part,
		TextureId = "rbxassetid://" .. id
	}})
end

local function name(part, str)
	serverendpoint:InvokeServer("SetName", { part }, str)
end

local function lock(part, bool)
	serverendpoint:InvokeServer("SetLocked", { part }, bool)
end

local function setcollision(part, bool)
	serverendpoint:InvokeServer("SyncCollision", {{
		Part = part,
		CanCollide = bool
	}})
end

local function setanchor(part, bool)
	serverendpoint:InvokeServer("SyncAnchor", {{
		Part = part,
		Anchored = bool
	}})
end

local function createdecal(part, side)
	serverendpoint:InvokeServer("CreateTextures", {{
		Part = part,
		Face = side,
		TextureType = "Decal"
	}})
end

local function setdecal(part, asset, side)
	serverendpoint:InvokeServer("SyncTexture", {{
		Part = part,
		Face = side,
		TextureType = "Decal",
		Texture = "rbxassetid://" .. asset
	}})
end

-- ===== 函数别名（保持你原写法能跑）=====
CreatePart = function(cf)
	return serverendpoint:InvokeServer("CreatePart", "Normal", cf, workspace)
end
SetName = name
SetAnchor = setanchor
AddMesh = makemesh
Resize = resize
MeshResize = syncmeshsize
SetMesh = syncmeshid
SetTexture = syncmeshtexture
SetCollision = setcollision

-- ===== 地图主体 =====
local function makerealmbase()
	-- Base
	local position = CFrame.new(0, 5, 0)
	local base = CreatePart(position)
	resize(base, Vector3.new(500, 16, 500), position)
	syncmaterial(base, Enum.Material.Concrete)
	color(base, Color3.new(0.513725, 0.513725, 0.513725))
	name(base, "loltroll")
	lock(base, true)

	-- Spawn
	local spawnpos = CFrame.new(34.5, 8.1, -26)
	local spawna = serverendpoint:InvokeServer("CreatePart", "Spawn", spawnpos, workspace)
	resize(spawna, Vector3.new(20, 10, 20), spawnpos)
	name(spawna, "SpawnLocation")
	lock(spawna, true)
	createdecal(spawna, Enum.NormalId.Top)
	setdecal(spawna, "77735500193276", Enum.NormalId.Top)
	transparency(spawna, 1)

	-- 左 rules
	local pos = CFrame.new(74.143, 24, -25.232)
	local rules = serverendpoint:InvokeServer("CreatePart", "Normal", pos, workspace)
	transparency(rules, 0)
	setcollision(rules, false)
	createdecal(rules, Enum.NormalId.Left)
	setdecal(rules, "77735500193276", Enum.NormalId.Left)
	color(rules, Color3.new(1,1,1))
	resize(rules, Vector3.new(3.5,25,40), pos)
	name(rules, "rules block")
	lock(rules, true)

	-- 右 bad
	local pos2 = CFrame.new(1.143, 24, -25.232)
	local bad = serverendpoint:InvokeServer("CreatePart", "Normal", pos2, workspace)
	transparency(bad, 1)
	setcollision(bad, false)
	createdecal(bad, Enum.NormalId.Right)
	setdecal(bad, "77735500193276", Enum.NormalId.Right)
	resize(bad, Vector3.new(3.5,25,40), pos2)
	name(bad, "bad invisible lol")
	lock(bad, true)
end

-- ===== 天空 =====
local function sky()
	local s = CreatePart(CFrame.new(0,5,0))
	AddMesh(s)
	SetMesh(s, "135695336057486")
	SetTexture(s, "135695336057486")
	MeshResize(s, Vector3.new(20000,20000,20000))
	lock(s,true)
	name(s,"U.N")
	setcollision(s,false)
end

local function realm()
	sky()
	makerealmbase()
end

-- ===== ifioood 人物 =====
local spawnPosition = Vector3.new(36.83, 51.61, -71.48)
CreatePart(CFrame.new(spawnPosition))
task.wait(0.1)

for _, v in ipairs(workspace:GetDescendants()) do
	if v:IsA("BasePart") and (v.Position - spawnPosition).Magnitude < 1 then
		SetName(v, "ifioood")
		SetAnchor(v, true)
		AddMesh(v)
		Resize(v, Vector3.new(50,50,30), v.CFrame)
		MeshResize(v, Vector3.new(0.5,0.5,0.5))
		SetMesh(v, "1347582902")
		SetTexture(v, "136244369348699")
		SetCollision(v, true)
		break
	end
end

realm()

-- ===== 结尾命令 =====
RequestCommand:InvokeServer(";res all")
wait(0.3)
RequestCommand:InvokeServer(";r6 all")
RequestCommand:InvokeServer(";m Team UnethicalNetwork LOL")
RequestCommand:InvokeServer(";serverHint team U.N is join")
RequestCommand:InvokeServer(";char all Unethical_Network")
RequestCommand:InvokeServer(";time 7")