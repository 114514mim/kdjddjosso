local TextChatService = game:GetService("TextChatService")

task.wait(0.5)

local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
if channel then
    local success, err = pcall(function()
        channel:SendAsync(";time 24")
    end)

    if success then
        -- ç­‰ä¸€ä¼šï¼Œç¡®ä¿æ¶ˆæ¯å·²ç»å‘å‡º
        task.wait(0.3)
    else
        warn("è¯´è¯å¤±è´¥:", err)
    end
end

-- F3X å¤©ç©ºç›’ä¸€é”®æ›´æ¢è„šæœ¬
local player = game.Players.LocalPlayer

-- 1. å®šä½F3Xå·¥å…·
local function getSyncTool()
    local tool
    for _, v in pairs(player:GetDescendants()) do
        if v.Name == "SyncAPI" then
            tool = v.Parent
            break
        end
    end
    if not tool then
        for _, v in pairs(game.ReplicatedStorage:GetDescendants()) do
            if v.Name == "SyncAPI" then
                tool = v.Parent
                break
            end
        end
    end
    return tool
end

-- 2. è°ƒç”¨F3Xå‘½ä»¤
local function runSync(args)
    local tool = getSyncTool()
    if tool and tool.SyncAPI and tool.SyncAPI.ServerEndpoint then
        tool.SyncAPI.ServerEndpoint:InvokeServer(unpack(args))
    end
end

-- 3. å°è£…F3XåŠŸèƒ½
local function SetAnchor(part, boolean)
    runSync({"SyncAnchor", { { ["Part"] = part, ["Anchored"] = boolean } }})
end
local function CreatePart(cf, parent)
    runSync({"CreatePart", "Normal", cf, parent})
end
local function AddMesh(part)
    runSync({"CreateMeshes", { { ["Part"] = part } }})
end
local function SetMesh(part, meshid)
    runSync({"SyncMesh", { { ["Part"] = part, ["MeshId"] = "rbxassetid://" .. meshid } }})
end
local function SetTexture(part, texid)
    runSync({"SyncMesh", { { ["Part"] = part, ["TextureId"] = "rbxassetid://" .. texid } }})
end
local function MeshResize(part, size)
    runSync({"SyncMesh", { { ["Part"] = part, ["Scale"] = size } }})
end

-- 4. æ ¸å¿ƒå¤©ç©ºæ›´æ¢å‡½æ•° (ä½¿ç”¨ä½ çš„è´´å›¾ID)
local function createSky(texId)
    texId = tostring(texId)
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    local cf = hrp.CFrame
    local skyPos = cf.Position + Vector3.new(0, 6, 0)
    
    -- æŸ¥æ‰¾å·²å­˜åœ¨çš„å¤©ç©ºç›’
    local existingSky = nil
    for _, v in workspace:GetDescendants() do
        if v.Name == "Skybox" and v:IsA("BasePart") then
            existingSky = v
            break
        end
    end
    
    if existingSky then
        -- æ›´æ–°ç°æœ‰å¤©ç©ºç›’
        SetTexture(existingSky, texId)
        print("âœ… å¤©ç©ºç›’è´´å›¾å·²æ›´æ–°ä¸º ID: " .. texId)
    else
        -- åˆ›å»ºæ–°å¤©ç©ºç›’
        CreatePart(CFrame.new(skyPos), workspace)
        task.wait(0.2)
        
        local newPart = nil
        for _, v in workspace:GetDescendants() do
            if v:IsA("BasePart") and v.Parent == workspace then
                local distance = (v.Position - skyPos).Magnitude
                if distance < 5 then
                    newPart = v
                    v.Name = "Skybox"
                    break
                end
            end
        end
        
        if newPart then
            SetAnchor(newPart, true)
            AddMesh(newPart)
            SetMesh(newPart, "111891702759441") -- çƒå½¢ç½‘æ ¼
            SetTexture(newPart, texId)
            MeshResize(newPart, Vector3.new(8000, 8000, 8000))
            print("âœ… æ–°å¤©ç©ºç›’å·²åˆ›å»ºï¼è´´å›¾ID: " .. texId)
        end
    end
end

-- 5. è„šæœ¬å¯åŠ¨ - ç›´æ¥ä½¿ç”¨ä½ çš„è´´å›¾ID
task.spawn(function()
    -- ç­‰å¾…è§’è‰²åŠ è½½
    if not player.Character then
        player.CharacterAdded:Wait()
    end
    task.wait(1)
    
    -- åº”ç”¨ä½ çš„è´´å›¾ID
    createSky("77735500193276")
    
    print("ğŸ¯ F3Xå¤©ç©ºç›’å·²è‡ªåŠ¨åº”ç”¨ï¼Œè´´å›¾ID: 77735500193276")
end)